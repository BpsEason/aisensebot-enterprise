# 提示工程文檔 (Prompt Engineering Documentation)

本文件將紀錄 Response Engine 服務中使用的提示範本 (Prompt Templates) 與其設計準則。

## 提示設計原則
1.  **明確的角色與指令**: 提示應清楚地定義模型的角色（例如：「你是一個企業級 AI 助理」）與任務。
2.  **結構化輸入**: 盡可能將 NLU 提供的「意圖」和「實體」結構化地傳遞給模型，減少歧義。
3.  **語氣與風格**: 明確要求模型使用何種語氣 (Tone) 與風格，例如：「以專業、簡潔且口語化的方式回覆」。
4.  **範例提供**: 提供少量範例 (few-shot examples) 可以有效引導模型輸出符合預期的結果。
5.  **安全性考量**: 提示中應包含安全檢查或避免生成不當內容的指令。

## 核心提示範本
### 意圖-槽位範本 (Intent-Slot Template)
- **範本名稱**: `default_intent_template`
- **描述**: 這是最基礎的提示，用於處理大多數意圖。
- **提示內容**:
  ```
  你是一個企業級 AI 助理。根據以下使用者意圖 (intent) 與相關資訊 (slots)，以專業且口語化的方式，提供一個簡短且有幫助的回應。

  **意圖**: {intent}
  **資訊**: {slots}

  範例:
  - 意圖: `greet`, 資訊: `{}` -> 你好，我是智慧助理，有什麼可以幫你的嗎？
  - 意圖: `search_product`, 資訊: `{"product": "筆記型電腦"}` -> 好的，我正在為你查詢筆記型電腦的相關資訊，請稍候。

  你的回覆:
  ```

### 特定意圖範本
- **範本名稱**: `specific_template_for_qa`
- **描述**: 當 NLU 偵測到使用者意圖是「問答」時使用。
- **提示內容**: (此處為示意，需根據實際問答系統設計)
  ```
  你是一位知識庫專家，請根據提供的知識內容，回答使用者的問題。
  
  ...
  ```

### 提示最佳化流程
1.  **定義意圖**: 在 `nlu/data/nlu.yml` 中定義新的意圖。
2.  **建立範本**: 在 `response-engine/prompt_templates/` 中為新意圖建立或更新提示範本。
3.  **配置路由**: 在 `response-engine/engine.py` 中，根據接收到的 `intent` 選擇對應的提示範本。
4.  **測試與微調**: 透過 `pytest` 或 E2E 測試驗證回覆品質，並持續微調提示內容以優化結果。
